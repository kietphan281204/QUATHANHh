<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>B·∫ßu Tr·ªùi Trung Thu ‚Äî ƒê√®n Lung Linh</title>
<style>
  /* ===== BODY & CANVAS ===== */
  body {
    margin: 0;
    overflow: hidden;
    background: radial-gradient(circle at top right, #0b1025 10%, #02030a 90%);
    height: 100vh;
    width: 100vw;
    font-family: "Segoe UI", sans-serif;
  }
  canvas {
    position: absolute;
    top: 0;
    left: 0;
    z-index: 2;
  }

  /* ===== M·∫∂T TRƒÇNG ===== */
  .moon {
    position: absolute;
    width: 140px;
    height: 140px;
    border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, #fff9d7 0%, #fff4aa 30%, #f5d16b 60%, #d2b14a 100%);
    box-shadow: 0 0 50px 20px rgba(255,240,170,0.4);
    animation: moon-glow 6s ease-in-out infinite;
    z-index: 3;
  }
  @keyframes moon-glow {
    0%,100% { box-shadow: 0 0 50px 20px rgba(255,240,180,0.45); transform:scale(1);}
    50% { box-shadow: 0 0 70px 30px rgba(255,250,200,0.65); transform:scale(1.03);}
  }

  /* ===== OVERLAY TH√îNG B√ÅO ===== */
  .overlay {
    position: fixed;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(0,0,0,0.6);
    opacity: 0;
    pointer-events: none;
    transition: opacity 1s ease;
    z-index: 10;
  }
  .overlay.show {
    opacity: 1;
    pointer-events: auto;
  }
  .message {
    background: linear-gradient(135deg, rgba(255,111,181,0.25), rgba(255,154,208,0.18));
    border-radius: 20px;
    padding: 30px 50px;
    text-align: center;
    box-shadow: 0 0 40px rgba(255,111,181,0.3);
    color: #fff;
    font-size: 28px;
    animation: fadeUp 1s ease forwards;
  }
  @keyframes fadeUp {
    from { transform: translateY(30px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  /* N√∫t chuy·ªÉn trang */
  #nextBtnContainer button {
    padding: 12px 25px;
    font-size: 18px;
    margin-top: 20px;
    border-radius: 10px;
    border: none;
    cursor: pointer;
    background: rgba(255,102,204,0.9);
    color: #fff;
    box-shadow: 0 0 20px rgba(255,102,204,0.7);
    transition: transform 0.2s, box-shadow 0.2s;
  }
  #nextBtnContainer button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 30px rgba(255,102,204,0.9);
  }

  /* ===== N√öT NH·∫†C N·ªÄN ===== */
  #playBtn {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    z-index: 9999;
    padding: 25px 50px;
    font-size: 18px;
    background: rgba(255, 102, 204, 0.9);
    color: #fff;
    border: none;
    border-radius: 15px;
    cursor: pointer;
    box-shadow: 0 0 30px rgba(255,102,204,0.7);
    transition: transform 0.2s, box-shadow 0.2s;
  }
  #playBtn:hover { transform: translate(-50%, -50%) scale(1.1); }

  /* ===== MEDIA QUERY MOBILE ===== */
  @media (max-width: 768px) {
    .moon { width: 100px; height: 100px; }
    .message { font-size: 18px; padding: 20px; }
    #nextBtnContainer button { font-size: 16px; padding: 10px 20px; }
  }
</style>
</head>
<body>
  <!-- M·∫∑t trƒÉng -->
  <div class="moon" id="moon"></div>
  <!-- Canvas lanterns -->
  <canvas id="lanterns"></canvas>

  <!-- Overlay th√¥ng b√°o -->
  <div id="overlay" class="overlay">
    <div class="message" id="message">
      üåï Ch√∫c Thanh Trung thu c√°i g√¨ hay nh·∫•t t·ªët nh·∫•t tuy·ªát  nh·∫•t may m·∫Øn nh·∫•t su√¥n s·∫ª nh·∫•t ƒëi·ªÅu ƒë·∫øn v·ªõi Thanh. <br>
     Peo c≈©ng bi·∫øt n√≥i g√¨ th√™m,th·ªùi gian t·ªõi b·∫•p c·∫ßn gi√∫p g√¨ th√¨ nh·ªù peo th·ª≠ ƒë∆∞·ª£c ch·∫Øt ch·∫Øn peo kh√¥ng t·ª´ ch·ªëi r·ªìi.Peo v·ªõi B·∫•p c≈©ng bi·∫øt nhau ƒë∆∞·ª£c 4 nƒÉm r·ªìi ƒë√¥i khi l·∫°i v·ª´a th√¢n nh∆∞ng c≈©ng xa l·∫° l·∫Øm ·∫•y kkk peo c≈©ng bi·∫øt c√≥ l√∫c s·∫Ω qu√™n h·∫øt  th√¥i v·∫•n ƒë·ªÅ th·ªùi gian thui. <br>
      TRUNG THU ZUII ZE.
      <div id="nextBtnContainer"></div>
    </div>
  </div>

  <!-- Nh·∫°c n·ªÅn -->
  <audio id="audio" src="nhac.mp3" preload="auto" playsinline></audio>
  <button id="playBtn">‚ñ∂ B·∫•m V√¥ √¢y</button>

<script>
  const canvas = document.getElementById('lanterns');
  const ctx = canvas.getContext('2d');
  const moon = document.getElementById('moon');
  const overlay = document.getElementById('overlay');
  const audio = document.getElementById('audio');
  const playBtn = document.getElementById('playBtn');
  let w, h, startTime = Date.now();

  // ===== RESIZE CANVAS =====
  function resize(){
    w = canvas.width = innerWidth;
    h = canvas.height = innerHeight;
  }
  resize();
  window.addEventListener('resize', resize);

  // ===== M·∫∂T TRƒÇNG DI CHUY·ªÇN =====
  function moveMoon() {
    const t = (Date.now() - startTime) * 0.00005;
    const x = w * (0.1 + 0.8 * ((Math.sin(t) + 1) / 2));
    const y = h * (0.1 + 0.05 * Math.sin(t * 2));
    moon.style.left = `${x}px`;
    moon.style.top = `${y}px`;
  }

  // ===== SAO =====
  const stars = Array.from({length: 200}, () => ({
    x: Math.random() * w,
    y: Math.random() * h * 0.8,
    size: Math.random() * 1.5 + 0.3,
    alpha: Math.random(),
    flicker: Math.random() * 0.02 + 0.005
  }));

  // ===== SAO BƒÇNG =====
  let shootingStars = [];
  function spawnShootingStar() {
    if (Math.random() < 0.02) {
      shootingStars.push({
        x: Math.random() * w,
        y: Math.random() * h * 0.4,
        len: Math.random() * 100 + 80,
        speed: Math.random() * 12 + 8,
        alpha: 1,
        angle: Math.PI / 4 + Math.random() * 0.2,
      });
    }
  }
  function drawShootingStars() {
    for (let i = shootingStars.length - 1; i >= 0; i--) {
      const s = shootingStars[i];
      const dx = Math.cos(s.angle) * s.len;
      const dy = Math.sin(s.angle) * s.len;
      const gradient = ctx.createLinearGradient(s.x, s.y, s.x - dx, s.y - dy);
      gradient.addColorStop(0, `rgba(255,255,255,${s.alpha})`);
      gradient.addColorStop(1, `rgba(255,255,255,0)`);
      ctx.beginPath();
      ctx.strokeStyle = gradient;
      ctx.lineWidth = 2;
      ctx.moveTo(s.x, s.y);
      ctx.lineTo(s.x - dx, s.y - dy);
      ctx.stroke();
      s.x += Math.cos(s.angle) * s.speed;
      s.y += Math.sin(s.angle) * s.speed;
      s.alpha -= 0.02;
      if (s.alpha <= 0) shootingStars.splice(i, 1);
    }
  }

  // ===== ƒê√àN TR·ªúI =====
  const words = ["Trung Thu", "Zui Z·∫ª", "B√°nh Ngon"];
  const lanternCount = 35;
  const lanterns = [];
  for (let i = 0; i < lanternCount; i++) {
    lanterns.push({
      x: Math.random() * w,
      y: h + Math.random() * h,
      size: Math.random() * 24 + 20,
      speed: Math.random() * 0.3 + 0.15,
      flicker: Math.random() * 0.05 + 0.02,
      sway: Math.random() * 0.002 + 0.001,
      offset: Math.random() * 2 * Math.PI,
      swing: Math.random() * Math.PI * 2,
      word: words[i % words.length]
    });
  }

  function rainbowColor(shift = 0) {
    const t = Date.now() * 0.002 + shift;
    const r = Math.sin(t) * 127 + 128;
    const g = Math.sin(t + 2) * 127 + 128;
    const b = Math.sin(t + 4) * 127 + 128;
    return `rgb(${r|0},${g|0},${b|0})`;
  }

  function drawStars() {
    for (let s of stars) {
      s.alpha += s.flicker;
      if (s.alpha <= 0 || s.alpha >= 1) s.flicker *= -1;
      ctx.beginPath();
      ctx.globalAlpha = s.alpha;
      ctx.fillStyle = "white";
      ctx.arc(s.x, s.y, s.size, 0, Math.PI * 2);
      ctx.fill();
    }
    ctx.globalAlpha = 1;
  }

  function drawLantern(l) {
    const flicker = 0.8 + Math.sin(Date.now() * l.flicker) * 0.2;
    const width = l.size * 0.6;
    const height = l.size * 1.6;

    ctx.save();
    ctx.translate(l.x, l.y);
    const grad = ctx.createRadialGradient(0, 0, 0, 0, 0, l.size);
    grad.addColorStop(0, `rgba(255,220,200,${0.9*flicker})`);
    grad.addColorStop(0.4, `rgba(255,160,100,${0.85*flicker})`);
    grad.addColorStop(1, `rgba(255,90,20,0)`);
    ctx.fillStyle = grad;
    ctx.beginPath();
    ctx.ellipse(0, 0, width, height, 0, 0, Math.PI * 2);
    ctx.fill();

    ctx.beginPath();
    ctx.strokeStyle = "rgba(255,180,120,0.6)";
    ctx.lineWidth = 1;
    ctx.moveTo(0, height * 0.4);
    ctx.lineTo(0, height * 0.9);
    ctx.stroke();

    const bottomY = height * 0.95;
    const small = l.size * 0.35;
    const g2 = ctx.createRadialGradient(0, bottomY, 0, 0, bottomY, small);
    g2.addColorStop(0, `rgba(255,230,100,0.9)`);
    g2.addColorStop(0.5, `rgba(255,120,40,0.7)`);
    g2.addColorStop(1, `rgba(255,60,10,0)`);
    ctx.beginPath();
    ctx.fillStyle = g2;
    ctx.arc(0, bottomY, small, 0, Math.PI * 2);
    ctx.fill();

    const color = rainbowColor(l.x * 0.01);
    ctx.font = `${small * 0.8}px "Segoe UI", sans-serif`;
    ctx.textAlign = "center";
    ctx.textBaseline = "top";
    ctx.fillStyle = color;
    ctx.shadowBlur = 12;
    ctx.shadowColor = color;
    ctx.fillText(l.word, 0, bottomY + small * 0.3);

    ctx.restore();
  }

  function animate() {
    ctx.fillStyle = 'rgba(5,8,20,0.35)';
    ctx.fillRect(0, 0, w, h);

    drawStars();
    spawnShootingStar();
    drawShootingStars();
    moveMoon();

    for (let l of lanterns) {
      drawLantern(l);
      l.y -= l.speed;
      l.x += Math.sin(Date.now() * l.sway + l.offset) * 0.3;
      if (l.y + l.size < 0) {
        l.y = h + Math.random() * 100;
        l.x = Math.random() * w;
      }
    }

    requestAnimationFrame(animate);
  }
  animate();

  // ===== Overlay xu·∫•t hi·ªán sau 15s =====
  setTimeout(() => {
    overlay.classList.add('show');
    setTimeout(() => {
      const nextBtnContainer = document.getElementById('nextBtnContainer');
      const btn = document.createElement('button');
      btn.textContent = "Xem xong b·∫•m v√¥ ƒë√¢y";
      btn.addEventListener('click', () => {
        window.location.href = "https://ptk2812.wordpress.com";
      });
      nextBtnContainer.appendChild(btn);
    }, 10000);
  }, 15000);

  // ===== N√öT NH·∫†C N·ªÄN =====
  playBtn.addEventListener('click', () => {
    audio.play().catch(err => console.log("Kh√¥ng th·ªÉ ph√°t nh·∫°c:", err));
    playBtn.style.display = "none";
  });
</script>
</body>
</html>
